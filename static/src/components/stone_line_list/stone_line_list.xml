<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <!-- 
        Template del botón toggle.
        El popup se renderiza como DOM puro en document.body (ver stone_line_list.js),
        por lo que no hay template OWL para él aquí.
    -->
    <t t-name="sale_stone_selection.StoneExpandButton" owl="1">
        <div class="stone-field-wrapper" t-on-click="handleToggle">
            <button class="stone-toggle-btn" t-att-class="state.isExpanded ? 'active' : ''"
                    title="Ver/ocultar placas seleccionadas">
                <i class="fa fa-th-large" t-if="!state.isExpanded"/>
                <i class="fa fa-chevron-up" t-if="state.isExpanded"/>
                <span t-if="state.selectedCount > 0 and !state.isExpanded" 
                      class="stone-count-badge">
                    <t t-esc="state.selectedCount"/>
                </span>
            </button>
        </div>
    </t>
</templates>